<?xml version="1.0" encoding="UTF-8"?>
<!-- Resources on the web: -->
<!-- http://wiki.eclipse.org/Tycho/Packaging_Types -->
<!-- http://wiki.eclipse.org/Tycho/Reference_Card -->
<!-- http://wiki.eclipse.org/Category:Tycho -->
<!-- http://wiki.eclipse.org/Minerva -->
<!-- http://intellectualcramps.wordpress.com/2011/06/04/tycho-surefire-test-setup-tips/ -->
<!-- http://maksim.sorokin.dk/it/2010/12/21/tests-in-tycho/ -->
<!-- http://www.jug.ch/events/slides/111020_Tycho-Maven-Eclipse-RCP.pdf -->
<!-- http://git.eclipse.org/c/tycho/org.eclipse.tycho.git/tree/tycho-demo -->
<!-- http://timezra.blogspot.com/2010/05/tycho-tests-without-osgi.html -->
<!-- http://www.java-forum.org/deployment/116917-tycho-unit-tests.html -->
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
	xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<modelVersion>4.0.0</modelVersion>
	<groupId>org.eclipse.recommenders</groupId>
	<artifactId>org.eclipse.recommenders.parent</artifactId>
	<version>0.5.0-SNAPSHOT</version>
	<packaging>pom</packaging>
	<properties>
		<tycho-version>0.14.1</tycho-version>
		<recommenders-version>0.5.0-SNAPSHOT</recommenders-version>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
		<build-alias>b000</build-alias>
		<coverage.skip>false</coverage.skip>
	</properties>
	<modules>
		<module>etc/licenses</module>
		<module>etc/targets</module>
		<module>plugins</module>
		<module>tests</module>
		<module>features</module>
		<module>dist</module>
	</modules>
	<profiles>
		<profile>
			<id>build-server</id>
			<properties>
				<build-alias>b${env.BUILD_NUMBER}</build-alias>
			</properties>
		</profile>
		<profile>
			<id>e3x</id>
			<properties>
                <!-- Enables sonar analysis of the same project but for different versions of it -->
                <!-- http://docs.codehaus.org/display/SONAR/Advanced+parameters -->
                <sonar.branch>e3x</sonar.branch>
            </properties>
			<build>
				<plugins>
					<plugin>
						<groupId>org.eclipse.tycho</groupId>
						<artifactId>target-platform-configuration</artifactId>
						<version>${tycho-version}</version>
						<configuration>
							<target>
								<artifact>
									<groupId>org.eclipse.recommenders</groupId>
									<artifactId>targets</artifactId>
									<version>${recommenders-version}</version>
									<classifier>e3x</classifier>
								</artifact>
							</target>
						</configuration>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>e42</id>
			<properties>
                <!-- Enables sonar analysis of the same project but for different versions of it -->
                <!-- http://docs.codehaus.org/display/SONAR/Advanced+parameters -->
                <sonar.branch>e42</sonar.branch>
            </properties>
			<activation>
				<activeByDefault>true</activeByDefault>
			</activation>
			<build>
				<plugins>
					<plugin>
						<groupId>org.eclipse.tycho</groupId>
						<artifactId>target-platform-configuration</artifactId>
						<version>${tycho-version}</version>
						<configuration>
							<target>
								<artifact>
									<groupId>org.eclipse.recommenders</groupId>
									<artifactId>targets</artifactId>
									<version>${recommenders-version}</version>
									<classifier>e42</classifier>
								</artifact>
							</target>
						</configuration>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
            <id>quality</id>
            <activation>
            	<activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                <!-- Sonar properties -->
                <sonar.core.codeCoveragePlugin>jacoco</sonar.core.codeCoveragePlugin>
                <sonar.dynamicAnalysis>reuseReports</sonar.dynamicAnalysis>
                <!-- Points to the target folder of the global parent project -->
                <sonar.jacoco.reportPath>../../target/jacoco.exec</sonar.jacoco.reportPath>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.jacoco</groupId>
                        <artifactId>jacoco-maven-plugin</artifactId>
                        <version>0.5.6.201201232323</version>
                        <executions>
                            <execution>
                                <goals>
                                    <goal>prepare-agent</goal>
                                </goals>
                                <configuration>
                                    <append>true</append>
                                    <destFile>${sonar.jacoco.reportPath}</destFile>
                                    <includes>
                                    	<include>org.eclipse.recommenders.*</include>
                                    </includes>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
	</profiles>
	<build>
		<pluginManagement>
			<plugins>
				<plugin>
					<groupId>org.eclipse.tycho</groupId>
					<artifactId>tycho-maven-plugin</artifactId>
					<version>${tycho-version}</version>
					<!-- MB: why do we need extensions=true? -->
					<extensions>true</extensions>
				</plugin>
				<plugin>
					<groupId>org.eclipse.tycho</groupId>
					<artifactId>tycho-compiler-plugin</artifactId>
					<version>${tycho-version}</version>
					<configuration>
						<source>1.6</source>
						<target>1.6</target>
					</configuration>
				</plugin>
				<plugin>
					<groupId>org.eclipse.tycho</groupId>
					<artifactId>tycho-source-plugin</artifactId>
					<version>${tycho-version}</version>
					<executions>
						<execution>
							<id>attach-source</id>
							<phase>process-classes</phase>
							<goals>
								<goal>plugin-source</goal>
							</goals>
						</execution>
					</executions>
				</plugin>
				<plugin>
					<groupId>org.eclipse.tycho</groupId>
					<artifactId>tycho-packaging-plugin</artifactId>
					<version>${tycho-version}</version>
					<configuration>
						<format>'v'yyyyMMdd-HHmm'-${build-alias}'</format>
						<archiveSite>false</archiveSite>
					</configuration>
				</plugin>
				<plugin>
					<groupId>org.eclipse.tycho</groupId>
					<artifactId>tycho-surefire-plugin</artifactId>
					<version>${tycho-version}</version>
					<configuration>
						<appArgLine>${tycho.test.jvmArgs}</appArgLine>
					</configuration>
				</plugin>
				<plugin>
					<groupId>org.eclipse.tycho</groupId>
					<artifactId>tycho-p2-repository-plugin</artifactId>
					<version>${tycho-version}</version>
					<configuration>
						<includeAllDependencies>false</includeAllDependencies>
					</configuration>
				</plugin>
				<plugin>
					<groupId>com.mycila.maven-license-plugin</groupId>
					<artifactId>maven-license-plugin</artifactId>
					<version>1.9.0</version>
					<dependencies>
						<dependency>
							<groupId>org.eclipse.recommenders</groupId>
							<artifactId>license-headers</artifactId>
							<version>${recommenders-version}</version>
						</dependency>
					</dependencies>
					<executions>
						<execution>
							<goals>
								<goal>check</goal>
							</goals>
						</execution>
					</executions>
					<configuration>
						<encoding>UTF-8</encoding>
						<header>license-tu-darmstadt-2011.txt</header>
						<validHeaders>
							<validHeader>license-frankenberger-2011.txt</validHeader>
							<validHeader>license-fritz-kaluza-2010.txt</validHeader>
							<validHeader>license-fritz-kaluza-2010.txt</validHeader>
							<validHeader>license-faidherbe-2011.txt</validHeader>
							<validHeader>license-tu-darmstadt-2010.txt</validHeader>
							<validHeader>license-tu-darmstadt-2011.txt</validHeader>
							<validHeader>license-tu-darmstadt-2012.txt</validHeader>
							<validHeader>license-henss-2010.txt</validHeader>
							<validHeader>license-kutschke-2011.txt</validHeader>
							<validHeader>license-henss-2011.txt</validHeader>
							<validHeader>license-proksch-2011.txt</validHeader>
							<validHeader>license-google-wb.txt</validHeader>
						</validHeaders>
						<strictCheck>false</strictCheck>
						<quiet>false</quiet>
						<failIfMissing>true</failIfMissing>
						<includes>
							<include>src/**/*.java</include>
						</includes>
						<encoding>UTF-8</encoding>
					</configuration>
				</plugin>
				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-enforcer-plugin</artifactId>
					<version>1.0.1</version>
					<executions>
						<execution>
							<id>enforce-files-exist</id>
							<goals>
								<goal>enforce</goal>
							</goals>
						</execution>
					</executions>
				</plugin>
				<plugin>
					<groupId>org.codehaus.mojo</groupId>
					<artifactId>build-helper-maven-plugin</artifactId>
					<version>1.7</version>
				</plugin>
				<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself. -->
				<plugin>
					<groupId>org.eclipse.m2e</groupId>
					<artifactId>lifecycle-mapping</artifactId>
					<version>1.0.0</version>
					<configuration>
						<lifecycleMappingMetadata>
							<pluginExecutions>
								<pluginExecution>
									<pluginExecutionFilter>
										<groupId>org.jacoco</groupId>
										<artifactId>
											jacoco-maven-plugin
										</artifactId>
										<versionRange>
											[0.5.4.201111111111,)
										</versionRange>
										<goals>
											<goal>prepare-agent</goal>
										</goals>
									</pluginExecutionFilter>
									<action>
										<ignore></ignore>
									</action>
								</pluginExecution>
							</pluginExecutions>
						</lifecycleMappingMetadata>
					</configuration>
				</plugin>
			</plugins>
		</pluginManagement>
	</build>
</project>
